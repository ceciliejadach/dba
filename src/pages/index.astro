---
import MainLayout from "../layouts/MainLayout.astro";
import Card from "../components/Card.astro";
import ArticleCard from "../components/ArticleCard.astro";

const data = await fetch("https://euedhdrakswqsquhtjkx.supabase.co/rest/v1/products?limit=8", {
  method: "GET",
  headers: {
    apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1ZWRoZHJha3N3cXNxdWh0amt4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTUyNTEyNDYsImV4cCI6MjAzMDgyNzI0Nn0.mXDwiwon4LDuspPMmUhUACpS8eCG3AZ7Ttf8Dd2wwu0",
  },
}).then((res) => res.json());
const moreData = await fetch("https://euedhdrakswqsquhtjkx.supabase.co/rest/v1/products?limit=4&offset=4", {
  method: "GET",
  headers: {
    apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV1ZWRoZHJha3N3cXNxdWh0amt4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTUyNTEyNDYsImV4cCI6MjAzMDgyNzI0Nn0.mXDwiwon4LDuspPMmUhUACpS8eCG3AZ7Ttf8Dd2wwu0",
  },
}).then((res) => res.json());
---

<MainLayout titel="Forside">
  <h1>Forsideannoncer</h1>
  <section class="cards">
    {
      data.map((card) => {
        return <Card class="ad" data={card} />;
      })
    }
  </section>
  <h1>Annoncer som kunne være noget for dig</h1>
  <section class="cards">
    {
      moreData.map((card) => {
        return <Card class="ad" data={card} />;
      })
    }
  </section>

  <section>
    <h1 class="dba-guide-headline">Find inspiration fra DBA Guide</h1>
    <div class="gallery-wrap">
      <img src="./svg/back.svg" id="backBtn" alt="tilbage pil" />
      <div class="gallery">
        <div>
          <ArticleCard class="gallery_img" background="./imgs/training_guide.webp" title="Træningstøj" description="Bliv klogere på, hvordan du sælger og køber træningstøj og udstyr, samt hvad du skal være opmærksom på." />
          <ArticleCard class="gallery_img" background="./imgs/car_guide.webp" title="Hurtige biler" description="Hvordan finder du den bedste bil, der passer præcis til dine behov og forventninger?" />
          <ArticleCard class="gallery_img" background="./imgs/bag_guide.webp" title="Store tasker" description="Få hjælp til at finde den perfekte taske til dine behov og bliv klogere på, hvordan du hurtigst muligt får solgt din gamle." />
          <ArticleCard class="gallery_img" background="./imgs/chair_guide.webp" title="Møbler" description="Der er ikke de møbler som DBA ikke sælger. Find en masse brugte møbler og vær med til at give dem et nyt liv og hjem." />
          <ArticleCard class="gallery_img" background="./imgs/chair_guide.webp" title="Møbler" description="Der er ikke de møbler som DBA ikke sælger. Find en masse brugte møbler og vær med til at give dem et nyt liv og hjem." />
          <ArticleCard class="gallery_img" background="./imgs/chair_guide.webp" title="Møbler" description="Der er ikke de møbler som DBA ikke sælger. Find en masse brugte møbler og vær med til at give dem et nyt liv og hjem." />
        </div>
      </div>
      <img src="./svg/forward.svg" id="nextBtn" alt="næste pil" />
    </div>
  </section>
</MainLayout>

<style>
  /* opstilling af annoncer i grid */
  .cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(171px, 1fr));
    justify-items: center;
    gap: 2rem;
    margin-inline: 0.5rem;
    max-width: 980px;
    margin-bottom: 5rem;
  }

  .gallery {
    display: flex;
    overflow-x: scroll;
    margin-left: 0.5rem;
  }

  .gallery div {
    width: 100%;
    display: flex;
    grid-gap: 10px;
  }

  #backBtn,
  #nextBtn {
    display: none;
  }

  @media (min-width: 868px) {
    .dba-guide-headline {
      font-size: 2.25rem;
    }
    .gallery {
      width: 980px;
    }

    .gallery div {
      margin-right: 135px;
    }

    .gallery div .gallery_img {
      width: 100%;
    }

    .gallery::-webkit-scrollbar {
      display: none;
    }

    .gallery-wrap {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    #backBtn,
    #nextBtn {
      display: block;
      width: 45px;
      cursor: pointer;
      position: absolute;
      background-color: var(--main-white);
      padding: 13px 10px;
      border-radius: 50%;
    }

    #backBtn {
      left: 2%;
    }

    #nextBtn {
      right: 2%;
    }
  }
</style>

<script>
  let scrollContainer = document.querySelector(".gallery");
  let backBtn = document.getElementById("backBtn");
  let nextBtn = document.getElementById("nextBtn");

  // scrollContainer.addEventListener("wheel", (evt) => {
  //   evt.preventDefault();
  //   scrollContainer.scrollLeft += evt.deltaY;
  //   scrollContainer.style.scrollBehavior = "auto";
  // });

  nextBtn.addEventListener("click", () => {
    scrollContainer.style.scrollBehavior = "smooth";
    scrollContainer.scrollLeft += 320;
  });

  backBtn.addEventListener("click", () => {
    scrollContainer.style.scrollBehavior = "smooth";
    scrollContainer.scrollLeft -= 320;
  });
</script>
